<!DOCTYPE html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6 lt8"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7 lt8"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8 lt8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<html lang="en" class="no-js">
<!--<![endif]-->
<head>
<meta charset="UTF-8" />
<!-- <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">  -->
<title>New Group</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description"
    content="Login and Registration Form with HTML5 and CSS3" />
<meta name="keywords"
    content="html5, css3, form, switch, animation, :target, pseudo-class" />
<meta name="author" content="Codrops" />
<link rel="stylesheet" type="text/css" href="css/demo.css" />
<link rel="stylesheet" type="text/css" href="css/style.css" />
<link rel="stylesheet" type="text/css" href="css/animate-custom.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src = "jquery.cookie.js" type="text/javascript"></script>
</head>
<body>
<script   type="text/javascript">
function create() {
    var request1 = false;
    try {
    　request1 = new ActiveXObject("Microsoft.XMLHTTP");
    } catch (trymicrosoft) {
    　try {
    　　request1 = new ActiveXObject("Msxml2.XMLHTTP");
    　} catch (othermicrosoft) {
    　　try {
    　　　request1 = new XMLHttpRequest();

    　　} catch (failed) {
    　　　request1 = false;
    　　} 
        　}
    }

    if (!request1)
        {
        alert("Error initializing XMLHttpRequest!");
        return null;
        }
    
    var url1 = "http://localhost:8080/MeetUp/meetUp/accueil/createGroup";
    request1.open("post", url1, true);
    //request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"); 
    request1.setRequestHeader("Content-Type", "application/json"); 
    var c = getCookie("cookie");
    var a1 =  '{"name":"' + $("#name").val() + '","description":"' + $("#description").val()+ '","admin":"' + c + '"}';
    //var form = document.getElementById("myForm");
    alert(a1);
    //request.send(new FormData(form));
    request1.send(a1);
    request1.onreadystatechange =function(e){
        if (request1.readyState == 4){
            if (request1.status == 200 ){
                
                console.log("tes");
                history.go(-1);
                //window.location.replace('index.html');
            } else {
                  
                alert("Request1 was unsuccessful: " + request1.status + request1.responseText);
            }
        }
    };
    //request.send(new FormData(form));
    //request.send(null);
}    

function getCookie(sName) {

    var oRegex = new RegExp("(?:; )?" + sName + "=([^;]*);?");
    if (oRegex.test(document.cookie)) {

            return decodeURIComponent(RegExp["$1"]);

    } else {
            return null;
    }

}
</script>
    <div class="container">
        <header>
            <h1>
                <span>New Group</span>
            </h1>
        </header>
        <section>
            <div id="container_demo">
                <a class="hiddenanchor" id="toregister"></a> <a class="hiddenanchor"
                    id="tologin"></a>
                <div id="wrapper">
                    <div id="login" class="animate form">
                        <form enctype="multipart/form-data" autocomplete="on">
                            <h1>Informations</h1>
                            <p>
                                <label for="name" class="uname">What is the name of
                                    your new group ? </label> <input id="name"
                                    name="name" required="required" type="text"
                                    placeholder="eg. mynewgroup" />
                            </p>
                            <p>
                                <label for="description" class="description"> Please
                                    enter a description for your new group </label>
                                <textarea id="description" name="description" type="text"
                                    placeholder="mydescription" rows="3" cols="60"></textarea>
                            </p>

                            <p class="signin button">
                                <input type="button" value="Create" onclick = "create()" />
                            </p>
                            <p class="change_link">
                                <a href="javascript:history.go(-1)">Cancel</a>
                            </p>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </div>
</body>
</html>
