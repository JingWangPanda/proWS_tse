
<!DOCTYPE html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6 lt8"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7 lt8"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8 lt8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<html lang="en" class="no-js">
<!--<![endif]-->
<head>
<meta charset="UTF-8" />
<!-- <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">  -->
<title>Login and Registration</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description"
    content="Login and Registration Form with HTML5 and CSS3" />
<meta name="keywords"
    content="html5, css3, form, switch, animation, :target, pseudo-class" />
<meta name="author" content="Codrops" />
<link rel="stylesheet" type="text/css" href="css/demo.css" />
<link rel="stylesheet" type="text/css" href="css/style.css" />
<link rel="stylesheet" type="text/css" href="css/animate-custom.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
</head>
<body>
<script   type="text/javascript">

function getCustomerInfo() {
    var request = false;
    try {
    　request = new ActiveXObject("Microsoft.XMLHTTP");
    } catch (trymicrosoft) {
    　try {
    　　request = new ActiveXObject("Msxml2.XMLHTTP");
    　} catch (othermicrosoft) {
    　　try {
    　　　request = new XMLHttpRequest();

    　　} catch (failed) {
    　　　request = false;
    　　} 
        　}
    }

    if (!request)
        {
        return null;
        }
    
    var url = "http://localhost:8080/MeetUp/meetUp/accueil/login";
    request.open("post", url, true);
    //request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"); 
    request.setRequestHeader("Content-Type", "application/json"); 
    var a =  '{"email":"' + $("#username").val() + '","pwd":"' + $("#password").val() +'"}';
    var sValue = $("#username").val();
    //var pws = $('#password').val();
    //var form = document.getElementById("myForm");
    //request.send(new FormData(form));
    request.send(a);
    request.onreadystatechange =function(e){
        if (request.readyState == 4){
            if (request.status == 200 ){
				if(getCookie("cookie")===null)
                	{
                	setCookie("cookie", sValue,1);
                	}
				else
                	{
                	var b = getCookie("cookie");
                	}
				setCookie("cookieGroup","",1);  
                window.location.replace('main.html');
            } 
            else {                 
                 window.location.replace('index.html');
            }
        }
    };
    //request.send(new FormData(form));
    //request.send(null);
}

function signUp() {
    var request1 = false;
    try {
    　request1 = new ActiveXObject("Microsoft.XMLHTTP");
    } catch (trymicrosoft) {
    　try {
    　　request1 = new ActiveXObject("Msxml2.XMLHTTP");
    　} catch (othermicrosoft) {
    　　try {
    　　　request1 = new XMLHttpRequest();

    　　} catch (failed) {
    　　　request1 = false;
    　　} 
        　}
    }

    if (!request1)
        {
        return null;
        }
    
    var url1 = "http://localhost:8080/MeetUp/meetUp/accueil/signup";
    request1.open("post", url1, true);
    //request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"); 
    request1.setRequestHeader("Content-Type", "application/json"); 
    var a1 =  '{"firstnamesignup":"' + $("#firstnamesignup").val() + '","lastnamesignup":"' + $("#lastnamesignup").val()+ '","emailsignup":"' + $("#emailsignup").val() + '","passwordsignup":"' + $("#passwordsignup").val() + '","passwordsignup_confirm":"' + $("#passwordsignup_confirm").val()+ '","biography":"' + $("#biography").val() +'"}';
    //var form = document.getElementById("myForm");
    //request.send(new FormData(form));
    request1.send(a1);
    request1.onreadystatechange =function(e){
        if (request1.readyState == 4){
            if (request1.status == 200 ){
                
               
                window.location.replace('index.html');
            } else {                  
            }
        }
    };
    //request.send(new FormData(form));
    //request.send(null);
}    
    

function setCookie(sName, sValue,days) {
	    var expires;
	 
	    if (days) {
	        var date = new Date();
	        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
	        expires = "; expires=" + date.toGMTString();
	    } else {
	        expires = "";
	    }
	    document.cookie = escape(sName) + "=" + escape(sValue) + expires + "; path=/";
	}
	
function getCookie(sName) {
	    var nameEQ = escape(sName) + "=";
	    var ca = document.cookie.split(';');
	    for (var i = 0; i < ca.length; i++) {
	        var c = ca[i];
	        while (c.charAt(0) === ' ') c = c.substring(1, c.length);
	        if (c.indexOf(nameEQ) === 0) return unescape(c.substring(nameEQ.length, c.length));
	    }
	    return null;
	}
	
function eraseCookie(sName,sValue) {
	setCookie(sName, sValue, -1);
}

// function getCookie(sName) {

//     var oRegex = new RegExp("(?:; )?" + sName + "=([^;]*);?");
//     if (oRegex.test(document.cookie)) {

//             return decodeURIComponent(RegExp["$1"]);

//     } else {
//             return null;
//     }

// }

    

</script>
    <div class="container">
        <header>
            <h1>
                <span>Login and Registration</span>
            </h1>
        </header>
        <section>
            <div id="container_demo">
                <a class="hiddenanchor" id="toregister"></a> <a class="hiddenanchor"
                    id="tologin"></a>
                <div id="wrapper">
                    <div id="login" class="animate form">
                        <form enctype="multipart/form-data"  id = "myForm" name = "myForm" autocomplete="on">
                            <h1>Log in</h1>
                            <p>
                                <label for="username" class="uname" data-icon="e"> Your
                                    email </label> <input id="username" name="username" required="required"
                                    type="email" placeholder="mymail@mail.com" />
                            </p>
                            <p>
                                <label for="password" class="youpasswd" data-icon="p">
                                    Your password </label> <input id="password" name="password"
                                    required="required" type="password" placeholder="eg. X8df!90EO" />
                            </p>
                            <p class="login button">
                                <input type="button" id="btnModify" value="Login"  onclick="getCustomerInfo()"/>
                            </p>
                            <p class="change_link">
                                Not a member yet ? <a href="#toregister" class="to_register">Join us</a>
                            </p>
                        </form>
                    </div>

                    <div id="register" class="animate form">
                        <form enctype="multipart/form-data" id = "myFormSignUp" name = "myFormSignUp" autocomplete="on">
                            <h1>Sign up</h1>
                            <p>
                                <label for="firstnamesignup" class="uname" data-icon="u">Your
                                    first name*</label> <input id="firstnamesignup" name="firstnamesignup"
                                    required="required" type="text" placeholder="myfirstname" />
                            </p>
                            <p>
                                <label for="lastnamesignup" class="uname" data-icon="u">Your
                                    last name*</label> <input id="lastnamesignup" name="lastnamesignup"
                                    required="required" type="text" placeholder="mylastname" />
                            </p>
                            <p>
                                <label for="emailsignup" class="youmail" data-icon="e">
                                    Your email*</label> <input id="emailsignup" name="emailsignup"
                                    required="required" type="email"
                                    placeholder="mysupermail@mail.com" />
                            </p>
                            <p>
                                <label for="passwordsignup" class="youpasswd" data-icon="p">Your
                                    password* </label> <input id="passwordsignup" name="passwordsignup"
                                    required="required" type="password" placeholder="eg. X8df!90EO" />
                            </p>
                            <p>
                                <label for="passwordsignup_confirm" class="youpasswd"
                                    data-icon="p">Please confirm your password </label> <input
                                    id="passwordsignup_confirm" name="passwordsignup_confirm"
                                    required="required" type="password" placeholder="eg. X8df!90EO" />
                            </p>
                            <p>
                                <label for="biography" class="biography"> Please enter
                                    your biography </label>
                                <textarea id="biography" name="biography" type= "text"
                                    placeholder="mybiography" rows="3" cols="60"></textarea>
                            </p>
                            <p class="signin button">
                                <input type="button" value="Sign up" onclick = "signUp()" />
                            </p>
                            <p class="change_link">
                                Already a member ? <a href="#tologin" class="to_register">
                                    Go and log in </a>
                            </p>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </div>
</body>
</html>



